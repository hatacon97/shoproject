
    <style>
        #current{
            width:515px;
            height:389px;
        }
        #img_click{
            width:92px;
            height:66px;
        }
    </style>
    <body>
    <!-- Start Breadcrumbs -->
    <!-- <div class="breadcrumbs">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 col-md-6 col-12">
                    <div class="breadcrumbs-content">
                        <h1 class="page-title">Single Product</h1>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-12">
                    <ul class="breadcrumb-nav">
                        <li><a href="home"><i class="lni lni-home"></i> Home</a></li>
                        <li><a href="productList">Shop</a></li>
                        <li>Single Product</li>
                    </ul>
                </div>
            </div>
        </div>
    </div> -->
    <!-- End Breadcrumbs -->

    <!-- Start Item Details -->
    <section class="item-details section">
        <div class="container">
            <div class="top-area">
                <div class="row align-items-center">
                    <div class="col-lg-6 col-md-12 col-12">
                        <div class="product-images">
                            <main id="gallery">
                                <div class="main-img">
                                    <img src="../<%= prod_detailFile[0].FILE_ROUTE %>" id="current" alt="#">
                                </div>
                                <div class="images">
                                    <img src="../<%= prod_detailFile[0].FILE_ROUTE %>" class="img" id="img_click" alt="#">
                                    <img src="../<%= prod_detailFile[1].FILE_ROUTE %>" class="img" id="img_click" alt="#">
                                    <img src="../<%= prod_detailFile[2].FILE_ROUTE %>" class="img" id="img_click" alt="#">
                                    <img src="../<%= prod_detailFile[3].FILE_ROUTE %>" class="img" id="img_click" alt="#">
                                    <img src="../<%= prod_detailFile[4].FILE_ROUTE %>" class="img" id="img_click" alt="#">
                                </div>
                            </main>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-12 col-12">
                        <div class="product-info">
                            <h2 class="title"><%= prod_detail[0].PROD_NM %></h2>
                            <p class="category"><i class="lni lni-tag"></i> Drones:<a href="javascript:void(0)">Action
                                    cameras</a></p>
                            <h3 class="price"><%= prod_detail[0].PROD_PRICE %>원</h3>
                            <div class="row">
                                
                                <div class="col-lg-4 col-md-4 col-12">
                                    <div class="form-group">
                                        <label for="color">남은 재고량:</label>
                                        <h6><%= prod_detail[0].PROD_CNT %>개</h6>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-4 col-12">
                                    <div class="form-group quantity">
                                        <label for="color">수량(선택)</label><br/>
                                        <input type="button" class="btn" onclick="count('plus')" value="+"/>
                                        <input type="number" class="form-control" id="prod_cnt" name="prod_cnt" value="1">
                                        <input type="button" class="btn" onclick="count('minus')" value="-" />
                                    </div>
                                </div>
                            </div>
                            <div class="bottom-content">
                                <div class="row align-items-end">
                                    <div class="col-lg-4 col-md-4 col-12">
                                        <div class="button cart-button">
                                            <button class="btn" style="width: 100%;" onclick="addCart('<%=prod_detail[0].PROD_NO %>')">장바구니 추가</button>
                                            
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-12">
                                        <div class="wish-button">
                                            <button class="btn" style="width: 100%;" onclick="buyProd()">구매하기</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="product-details-info">
                <div class="single-block">
                    <div class="row">
                        <div class="col-lg-6 col-12">
                            <div class="info-body custom-responsive-margin">
                                <h4>제품 상세</h4>
                                <p><%= prod_detail[0].PROD_DETAIL %></p>
                            </div>
                        </div>
                        
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- End Item Details -->

    <!-- Review Modal -->
    <div class="modal fade review-modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Leave a Review</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="review-name">Your Name</label>
                                <input class="form-control" type="text" id="review-name" required="">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="review-email">Your Email</label>
                                <input class="form-control" type="email" id="review-email" required="">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="review-subject">Subject</label>
                                <input class="form-control" type="text" id="review-subject" required="">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="review-rating">Rating</label>
                                <select class="form-control" id="review-rating">
                                    <option>5 Stars</option>
                                    <option>4 Stars</option>
                                    <option>3 Stars</option>
                                    <option>2 Stars</option>
                                    <option>1 Star</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="review-message">Review</label>
                        <textarea class="form-control" id="review-message" rows="8" required=""></textarea>
                    </div>
                </div>
                <div class="modal-footer button">
                    <button type="button" class="btn">Submit Review</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Review Modal -->


</body>

<script type="text/javascript">
    const current = document.getElementById("current");
    const opacity = 0.6;
    const imgs = document.querySelectorAll(".img");
    imgs.forEach(img => {
        img.addEventListener("click", (e) => {
            //reset opacity
            imgs.forEach(img => {
                img.style.opacity = 1;
            });
            current.src = e.target.src;
            //adding class 
            //current.classList.add("fade-in");
            //opacity
            e.target.style.opacity = opacity;
        });
    });

    function addCart(PROD_NO){
        console.log(PROD_NO)
        var count = document.getElementById('prod_cnt').value
        fetch("/user/insertCart", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                PROD_NO: PROD_NO,
                count: document.getElementById('prod_cnt').value,
            }),
        })
        .then((response) => response.json())
        .then(function (data){
            alert('상품이 장바구니에 담겼습니다.')
        });
    }

    function count(type) {
        //결과를 포시할 element
        const resultElement = document.getElementById('prod_cnt');

        //현재 화면에 표시된 값
        let number = resultElement.value;

        //더하기 / 빼기
        if(type === 'plus'){
            number = parseInt(number) + 1;
        } else if(type === 'minus') {
            number = parseInt(number) -1;
        }

        //결과 출력
        resultElement.value = number;
    }
</script>